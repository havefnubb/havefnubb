<?xml version="1.0" encoding="UTF-8"?>
<urls xmlns="http://jelix.org/ns/urls/1.0">

    <!-- ****************************************************
            this part display the entrypoint index in the url to produre : 
            | http://localhost/index/downloads/mydir
            | http://localhost/index/downloads/mydir/myfile
            | etc...
            ****************************************************** -->

    <classicentrypoint name="index" default="true" noentrypoint="true">
		<url pathinfo="/404" module="jelix"     action="error:notfound"/>    
        <url pathinfo="/"    module="downloads" action="default:index"/>        
		<url pathinfo="/downloads/:dir" module="downloads" action="default:index">
			<param name="dir" type="string" />
		</url>               
		<url pathinfo="/downloads/dl/:id" module="downloads" action="default:dl">
			<param name="id" type="integer" />
		</url>
		<url pathinfo="/downloads/:dir/:url" module="downloads" action="default:view">
			<param name="dir" type="string" />
			<param name="url" type="string" />
		</url>
		<url pathinfo="/downloads/feeds/lastest/:dir" module="downloads" action="feeds:lastest">
			<param name="dir" type="string" />
		</url>		
		<url pathinfo="/downloads/feeds/mostpopular/:dir" module="downloads" action="feeds:mostpopular">
			<param name="dir" type="string" />
		</url>
		
		<!--  jcommunity  -->
		<url pathinfo="/auth/login" module="jcommunity" action="login:index"/>
		<url pathinfo="/auth/dologin" module="jcommunity" action="login:in"/>
		<url pathinfo="/auth/dologout" module="jcommunity" action="login:out"/>
		
		<url pathinfo="/users" module="jcommunity" action="default:index"/>
		<url pathinfo="/users/:user" module="jcommunity" action="account:show">
            <param name="user" />
		</url>
        <url pathinfo="/users/:user/prepareedit" module="jcommunity" action="account:prepareedit">
            <param name="user" />
		</url>        
		<url pathinfo="/users/:user/edit" module="jcommunity" action="account:edit" actionoverride="account:save">
            <param name="user" />
		</url>
		<url pathinfo="/users/:user/destroy" module="jcommunity" action="account:destroy" actionoverride="account:dodestroy">
		<param name="user" />
		</url>
		
		<url pathinfo="/registration" module="jcommunity" action="registration:index"/>
		<url pathinfo="/registration/save" module="jcommunity" action="registration:save"/>
		<url pathinfo="/registration/confirm" module="jcommunity" action="registration:confirm"/>
		<url pathinfo="/registration/confirmform" module="jcommunity" action="registration:confirmform"/>
		<url pathinfo="/registration/confirmok" module="jcommunity" action="registration:confirmok"/>
		
		<url pathinfo="/registration/password" module="jcommunity" action="password:index" />
		<url pathinfo="/registration/password/send" module="jcommunity" action="password:send"/>
		<url pathinfo="/registration/password/confirm" module="jcommunity" action="password:confirm"/>
		<url pathinfo="/registration/password/confirmform" module="jcommunity" action="password:confirmform"/>
		<url pathinfo="/registration/password/confirmok" module="jcommunity" action="password:confirmok"/>		
	</classicentrypoint>


    <!-- ****************************************************
            this part display the entrypoint dlmgr in the url to produre : 
            | http://localhost/downloadsmanager/index
            | http://localhost/downloadsmanager/manage 
            | http://localhost/downloadsmanager/manage/12345
            | http://localhost/downloadsmanager/dls
            | http://localhost/downloadsmanager/config
            | http://localhost/downloadsmanager/delete/12345
            ****************************************************** -->
    
    
    <classicentrypoint name="downloadsmanager" noentrypoint="false" optionalTrailingSlash="true">
        <!-- jacl2 urls -->
        <url pathinfo="/groups" module="jacl2db_admin" action="groups:index"/>
        <url pathinfo="/users" module="jacl2db_admin" action="users:index"/>
        <url pathinfo="/users/rights/:user" module="jacl2db_admin" action="users:rights">
            <param name="user" type="string" />
         </url>
        <url pathinfo="/users/addgroup/:grpid/:user" module="jacl2db_admin" action="users:addgroup">
            <param name="grpid" type="integer" />
            <param name="user" type="string" />
        </url>
        <url pathinfo="/users/removegroup/:grpid/:user" module="jacl2db_admin" action="users:removegroup">
            <param name="grpid" type="integer" />
            <param name="user" type="string" />
        </url>

        <!-- master_module -->
        <url pathinfo="/" module="master_admin" action="default:index"/>
        
        <!-- downloads module -->
		<url pathinfo="/manage" module="downloads" action="mgr:manage"/>
		<url pathinfo="/manage/:id" module="downloads" action="mgr:manage">
			<param name="id" type="integer" />
		</url>		
		<url pathinfo="/index" module="downloads" action="mgr:index"/>
		<url pathinfo="/dls" module="downloads" action="mgr:dls"/>
		<url pathinfo="/config" module="downloads" action="mgr:config"/>
		
		<url pathinfo="/delete/:id" module="downloads" action="mgr:delete">
			<param name="id" type="integer" />
		</url>
		<url pathinfo="/onblock/:id" module="downloads" action="mgr:dl_on_block">
			<param name="id" type="integer" />
		</url>
		<url pathinfo="/notonblock/:id" module="downloads" action="mgr:dl_not_on_block">
			<param name="id" type="integer" />
		</url>
		<url pathinfo="/enable/:id" module="downloads" action="mgr:dl_enable">
			<param name="id" type="integer" />
		</url>
		<url pathinfo="/disable/:id" module="downloads" action="mgr:dl_disable">
			<param name="id" type="integer" />
		</url>
	</classicentrypoint>
    
</urls>
